var app=angular.module("hrPerformanceApp",["ui.router","ngResource","ngCookies"]);app.config(["$locationProvider",function(a,b,c){}]),app.config(function(a,b,c,d){a.state("site",{"abstract":!0,views:{"navbar@":{templateUrl:"scripts/components/navbar/navbar.html",controller:"NavbarController"}},resolve:{}})}),app.controller("mainController",function(a,b,c,d,e){a.logOut=function(){c.remove("connectedUser"),c.remove("logged"),b.go("login")}}),console.log("after-config"),function(a,b,c){"use strict";function d(a,c,d){function e(a,d,e){var g,h;e=e||{},h=e.expires,g=b.isDefined(e.path)?e.path:f,b.isUndefined(d)&&(h="Thu, 01 Jan 1970 00:00:00 GMT",d=""),b.isString(h)&&(h=new Date(h));var i=encodeURIComponent(a)+"="+encodeURIComponent(d);i+=g?";path="+g:"",i+=e.domain?";domain="+e.domain:"",i+=h?";expires="+h.toUTCString():"",i+=e.secure?";secure":"";var j=i.length+1;return j>4096&&c.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+j+" > 4096 bytes)!"),i}var f=d.baseHref(),g=a[0];return function(a,b,c){g.cookie=e(a,b,c)}}b.module("ngCookies",["ng"]).provider("$cookies",[function(){function a(a){return a?b.extend({},d,a):d}var d=this.defaults={};this.$get=["$$cookieReader","$$cookieWriter",function(d,e){return{get:function(a){return d()[a]},getObject:function(a){var c=this.get(a);return c?b.fromJson(c):c},getAll:function(){return d()},put:function(b,c,d){e(b,c,a(d))},putObject:function(a,c,d){this.put(a,b.toJson(c),d)},remove:function(b,d){e(b,c,a(d))}}}]}]),b.module("ngCookies").factory("$cookieStore",["$cookies",function(a){return{get:function(b){return a.getObject(b)},put:function(b,c){a.putObject(b,c)},remove:function(b){a.remove(b)}}}]),d.$inject=["$document","$log","$browser"],b.module("ngCookies").provider("$$cookieWriter",function(){this.$get=d})}(window,window.angular),function(a,b,c){"use strict";function d(a){return null!=a&&""!==a&&"hasOwnProperty"!==a&&h.test("."+a)}function e(a,b){if(!d(b))throw g("badmember",'Dotted member path "@{0}" is invalid.',b);for(var e=b.split("."),f=0,h=e.length;h>f&&a!==c;f++){var i=e[f];a=null!==a?a[i]:c}return a}function f(a,c){c=c||{},b.forEach(c,function(a,b){delete c[b]});for(var d in a)!a.hasOwnProperty(d)||"$"===d.charAt(0)&&"$"===d.charAt(1)||(c[d]=a[d]);return c}var g=b.$$minErr("$resource"),h=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;b.module("ngResource",["ng"]).provider("$resource",function(){var a=this;this.defaults={stripTrailingSlashes:!0,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}}},this.$get=["$http","$q",function(d,h){function i(a){return j(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function j(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}function k(b,c){this.template=b,this.defaults=o({},a.defaults,c),this.urlParams={}}function l(i,j,r,s){function t(a,b){var c={};return b=o({},j,b),n(b,function(b,d){q(b)&&(b=b()),c[d]=b&&b.charAt&&"@"==b.charAt(0)?e(a,b.substr(1)):b}),c}function u(a){return a.resource}function v(a){f(a||{},this)}var w=new k(i,s);return r=o({},a.defaults.actions,r),v.prototype.toJSON=function(){var a=o({},this);return delete a.$promise,delete a.$resolved,a},n(r,function(a,e){var i=/^(POST|PUT|PATCH)$/i.test(a.method);v[e]=function(j,k,l,r){var s,x,y,z={};switch(arguments.length){case 4:y=r,x=l;case 3:case 2:if(!q(k)){z=j,s=k,x=l;break}if(q(j)){x=j,y=k;break}x=k,y=l;case 1:q(j)?x=j:i?s=j:z=j;break;case 0:break;default:throw g("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var A=this instanceof v,B=A?s:a.isArray?[]:new v(s),C={},D=a.interceptor&&a.interceptor.response||u,E=a.interceptor&&a.interceptor.responseError||c;n(a,function(a,b){"params"!=b&&"isArray"!=b&&"interceptor"!=b&&(C[b]=p(a))}),i&&(C.data=s),w.setUrlParams(C,o({},t(s,a.params||{}),z),a.url);var F=d(C).then(function(c){var d=c.data,h=B.$promise;if(d){if(b.isArray(d)!==!!a.isArray)throw g("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2} (Request: {3} {4})",e,a.isArray?"array":"object",b.isArray(d)?"array":"object",C.method,C.url);a.isArray?(B.length=0,n(d,function(a){"object"==typeof a?B.push(new v(a)):B.push(a)})):(f(d,B),B.$promise=h)}return B.$resolved=!0,c.resource=B,c},function(a){return B.$resolved=!0,(y||m)(a),h.reject(a)});return F=F.then(function(a){var b=D(a);return(x||m)(b,a.headers),b},E),A?F:(B.$promise=F,B.$resolved=!1,B)},v.prototype["$"+e]=function(a,b,c){q(a)&&(c=b,b=a,a={});var d=v[e].call(this,a,this,b,c);return d.$promise||d}}),v.bind=function(a){return l(i,o({},j,a),r)},v}var m=b.noop,n=b.forEach,o=b.extend,p=b.copy,q=b.isFunction;return k.prototype={setUrlParams:function(a,c,d){var e,f,h=this,j=d||h.template,k=h.urlParams={};n(j.split(/\W/),function(a){if("hasOwnProperty"===a)throw g("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(a)&&a&&new RegExp("(^|[^\\\\]):"+a+"(\\W|$)").test(j)&&(k[a]=!0)}),j=j.replace(/\\:/g,":"),c=c||{},n(h.urlParams,function(a,d){e=c.hasOwnProperty(d)?c[d]:h.defaults[d],b.isDefined(e)&&null!==e?(f=i(e),j=j.replace(new RegExp(":"+d+"(\\W|$)","g"),function(a,b){return f+b})):j=j.replace(new RegExp("(/?):"+d+"(\\W|$)","g"),function(a,b,c){return"/"==c.charAt(0)?c:b+c})}),h.defaults.stripTrailingSlashes&&(j=j.replace(/\/+$/,"")||"/"),j=j.replace(/\/\.(?=\w+($|\?))/,"."),a.url=j.replace(/\/\\\./,"/."),n(c,function(b,c){h.urlParams[c]||(a.params=a.params||{},a.params[c]=b)})}},l}]})}(window,window.angular),app.controller("AdminController",function(a,b,c,d,e){console.log("admin"),a.user=c.get("connectedUser"),a.user?"A"!=a.user.utilisateur.type?b.go("login"):a.id=a.user.utilisateur.id:b.go("login")}),app.controller("AdminArchiveController",function(a,b,c,d,e,f){a.user=e.get("connectedUser"),a.user?"A"!=a.user.utilisateur.type?b.go("login"):a.id=a.user.utilisateur.id:b.go("login"),f.get({id:c.id},function(b){a.collaborateur=b}),a.showObjectifs=function(b){a.hideobjectifs=!1;var c=a.collaborateur.fichesobjectifs.filter(function(a){return a.id==b});a.fichesobjectif=c[0],0==a.fichesobjectif.objectifs.length&&(a.hideobjectifs=!0),$("#objectifsModal").modal("show")},a.showEvaluations=function(b){a.hideevaluations=!1;var c=a.collaborateur.fichesevaluations.filter(function(a){return a.id==b});a.fichesevaluation=c[0],0==a.fichesevaluation.evaluations.length&&(a.hideevaluations=!0),$("#evaluationModal").modal("show")}}),app.controller("AdminCollaborateurController",function(a,b,c,d,e,f){a.user=e.get("connectedUser"),a.user?"A"!=a.user.utilisateur.type?b.go("login"):a.id=a.user.utilisateur.id:b.go("login"),console.log("admin"),f.get({id:c.id},function(b){a.collaborateur=b})}),app.controller("AdminCollaborateursController",function(a,b,c,d,e,f,g,h){console.log("admin collaborateur"),a.user=e.get("connectedUser"),a.user?"A"!=a.user.utilisateur.type?b.go("login"):a.id=a.user.utilisateur.id:b.go("login"),a.managerupdt={},a.modif=[],a.newcollaborateur={},a.collaborateurs=f.query(),a.initModif=function(b){a.collaborateurs.forEach(function(a){a.motDePasse=""}),a.modif[b]=!0},a.modifier=function(b,c){a.modif[b]=!1,f.update({id:c.id},c)},a.initsupprimer=function(b){a.collaborateursup=b,$("#suppressionModal").modal("show")},a.supprimer=function(){f["delete"]({id:a.collaborateursup.id},a.collaborateursup),$("#suppressionModal").modal("hide"),a.collaborateurs=f.query()},a.ajouter=function(){console.log("id manager "+a.managerupdt.id+"collaborateur"),console.log(a.newcollaborateur),f["new"]({idmanager:a.managerupdt.id},a.newcollaborateur),$("#addModal").modal("hide")},a.initajouter=function(){a.managers=g.query(),$("#addModal").modal("show")}}),app.controller("AdminEncadrantsController",function(a,b,c,d,e,f){console.log("admin encadrant"),a.user=e.get("connectedUser"),a.user?"A"!=a.user.utilisateur.type?b.go("login"):a.id=a.user.utilisateur.id:b.go("login"),a.modif=[],a.newencadrant={},a.encadrants=f.query(),f.get({id:161},function(a){console.log(a)}),a.initModif=function(b){a.encadrants.forEach(function(a){a.motDePasse=""}),a.modif[b]=!0},a.modifier=function(b,c){a.modif[b]=!1,f.update({id:c.id},c)},a.initsupprimer=function(b){a.encadrantsup=b,$("#suppressionModal").modal("show")},a.supprimer=function(){f["delete"]({id:a.encadrantsup.id},a.encadrantsup),$("#suppressionModal").modal("hide"),a.encadrants=f.query()},a.ajouter=function(){f.save(a.newencadrant),$("#addModal").modal("hide")},a.initajouter=function(){$("#addModal").modal("show")}}),app.controller("AdminManagersController",function(a,b,c,d,e,f){console.log("admin manager"),a.user=e.get("connectedUser"),a.user?"A"!=a.user.utilisateur.type?b.go("login"):a.id=a.user.utilisateur.id:b.go("login"),a.modif=[],a.newmanager={},a.managers=f.query(),a.initModif=function(b){a.managers.forEach(function(a){a.motDePasse=""}),a.modif[b]=!0},a.modifier=function(b,c){a.modif[b]=!1,f.update({id:c.id},c)},a.initsupprimer=function(b){a.managersup=b,$("#suppressionModal").modal("show")},a.supprimer=function(){f["delete"]({id:a.managersup.id},a.managersup),$("#suppressionModal").modal("hide"),a.managers=f.query()},a.ajouter=function(){f.save(a.newmanager),$("#addModal").modal("hide")},a.initajouter=function(){$("#addModal").modal("show")}}),app.config(function(a){a.state("administrateur",{url:"/admin",views:{"content@":{templateUrl:"scripts/app/entities/administrateur/listcollaborateurs.html",controller:"AdminCollaborateursController"},"navbar@":{templateUrl:"scripts/app/partials/navbar-a.partial.html"}}}).state("administrateur.fiches",{url:"/fiches/:id",views:{"content@":{templateUrl:"scripts/app/entities/administrateur/fiches.html",controller:"AdminArchiveController"}}}).state("administrateur.collaborateur",{url:"/collaborateur/:id",views:{"content@":{templateUrl:"scripts/app/entities/administrateur/detailcollaborateur.html",controller:"AdminCollaborateurController"}}}).state("administrateur.collaborateurs",{url:"/collaborateurs",views:{"content@":{templateUrl:"scripts/app/entities/administrateur/listcollaborateurs.html",controller:"AdminCollaborateursController"}}}).state("administrateur.Encadrants",{url:"/Encadrants",views:{"content@":{templateUrl:"scripts/app/entities/administrateur/listEncadrants.html",controller:"AdminEncadrantsController"}}}).state("administrateur.Managers",{url:"/Managers",views:{"content@":{templateUrl:"scripts/app/entities/administrateur/listManagers.html",controller:"AdminManagersController"}}})}),app.controller("CollaborateurController",function(a,b,c,d,e,f,g,h,i){console.log("Testing the rest API"),a.user=e.get("connectedUser"),a.user?"C"!=a.user.utilisateur.type?f.go("login"):a.id=a.user.utilisateur.id:f.go("login"),d.get({id:a.id},function(b){a.collaborateur=b,a.collaborateur.fichesobjectifs=a.collaborateur.fichesobjectifs.filter(function(a){return 1==a.autorisationAcces}),a.collaborateur.fichesevaluations=a.collaborateur.fichesevaluations.filter(function(a){return 1==a.autorisationAcces})}),a.currentfiche=g.currentfiche({id:a.id}),i.bapByStatut({id:a.id,statut:"A_VALIDER"},function(b){a.bap=b,a.ficheEnAttente=b.ficheObjectifsRediges}),a.loadAll=function(){a.collaborateurs=d.query()},a.valider=function(){console.log(a.bap),i.valider(a.bap)},a.rejeter=function(){console.log(a.bap),i.rejeter(a.bap)},a.showObjectifs=function(b){a.hideobjectifs=!1;var c=a.collaborateur.fichesobjectifs.filter(function(a){return a.id==b});a.fichesobjectif=c[0],0==a.fichesobjectif.objectifs.length&&(a.hideobjectifs=!0),$("#objectifsModal").modal("show")},a.showEvaluations=function(b){a.hidevaluations=!1;var c=a.collaborateur.fichesevaluations.filter(function(a){return a.id==b});a.fichesevaluation=c[0],0==a.fichesevaluation.evaluations.length&&(a.hidevaluations=!0),$("#evaluationModal").modal("show")}}),app.config(function(a){a.state("test",{url:"/tests",views:{"content@":{templateUrl:"scripts/app/entities/collaborateur/test.html",controller:"TestController"}}}).state("collaborateur",{url:"/collaborateurs",views:{"content@":{templateUrl:"scripts/app/entities/collaborateur/collaborateur.html",controller:"CollaborateurController"},"navbar@":{templateUrl:"scripts/app/partials/navbar-c.partial.html"}}}).state("collaborateur.fichesobjectifs",{url:"/collaborateurs/fichesobjectifs",views:{"content@":{templateUrl:"scripts/app/entities/collaborateur/fichesobjectifs.html",controller:"CollaborateurController"}}}).state("collaborateur.fichesevaluation",{url:"/collaborateurs/fichesevaluation",views:{"content@":{templateUrl:"scripts/app/entities/collaborateur/fichesevaluation.html",controller:"CollaborateurController"}}})}),app.controller("TestController",function(a,b,c,d){console.log("Testing the rest API"),d.get({id:149},function(a){console.log(a),a.evaluations[0].poids=-1,d.update({id:149},a)})}),app.controller("EncadrantCollaborateurController",function(a,b,c,d,e,f,g,h,i,j){a.user=h.get("connectedUser"),"E"!=a.user.utilisateur.type?b.go("login"):a.id=a.user.utilisateur.id,a.modif=[],a.feedback={},a.feedback.qualificationstheme=[],a.newqualification={},a.encadrant=j.get({id:a.id}),e.bapCourant({id:c.id},function(b){a.bap=b,console.log(a.encadrant)}),a.initdemandeBip=function(b){a.collaborateurdemande=b,console.log(b),$("#demandeBipModal").modal("show"),console.log(a.encadrant)},a.demandeBip=function(b){console.log("demande bip confirmé ...");var c={};c.collaborateur=b,c.dateDemande=new Date,c.encadrant=a.encadrant,f.save(c),$("#demandeBipModal").modal("hide")},a.evaluer=function(b){e.update({id:a.bap.id},a.bap)},a.initEvaluation=function(){$("#evaluationModal").modal("show")},a.initFeedBack=function(){$("#feedbackModal").modal("show")},a.feedBack=function(){a.feedback.encadrant=a.encadrant,a.feedback.entete.dateDebutIntervention=new Date(a.feedback.entete.dateDebutIntervention),a.feedback.entete.dateFinIntervention=new Date(a.feedback.entete.dateFinIntervention),console.log(a.feedback),g.save(a.feedback)},a.addqualification=function(){a.feedback.qualificationstheme.push(a.newqualification),a.newqualification={}},a.supprimerQualification=function(b){a.feedback.qualificationstheme.splice(b,1)},a.initModif=function(b){a.modif[b]=!0},a.Modif=function(b){a.modif[b]=!1}}),app.controller("EncadrantController",function(a,b,c,d,e,f,g,h,i,j){a.user=e.get("connectedUser"),"E"!=a.user.utilisateur.type?f.go("login"):a.id=a.user.utilisateur.id,a.encadrant=g.get({id:a.id}),i.encadrant({id:a.id},function(b){a.collaborateurs=b}),a.initdemandeBip=function(b){a.collaborateurdemande=b,$("#demandeBipModal").modal("show")},a.demandeBip=function(b){console.log("demande bip confirmé ...");var c={};c.collaborateur=b,c.dateDemande=new Date,c.encadrant=a.encadrant,j.save(c),$("#demandeBipModal").modal("hide")},a.evaluer=function(a){},a["class"]=function(a){return"EN_COURS"==a.statut?"info":"EN_ATTENTE"==a.statut?"warning":"VALIDE"==a.statut?"primary":"REJETE"==a.statut?"danger":void 0}}),app.config(function(a){a.state("encadrant",{url:"/encadrants",views:{"content@":{templateUrl:"scripts/app/entities/encadrant/encadrant.html",controller:"EncadrantController"},"navbar@":{templateUrl:"scripts/app/partials/navbar-e.partial.html"}}}).state("encadrant.fiches",{url:"/fiches/:id",views:{"content@":{templateUrl:"scripts/app/entities/encadrant/fiches.html",controller:"EncadrantArchiveController"}}}).state("encadrant.collaborateur",{url:"/collaborateur/:id",views:{"content@":{templateUrl:"scripts/app/entities/encadrant/detailcollaborateur.html",controller:"EncadrantCollaborateurController"}}}).state("encadrant.collaborateurs",{url:"/collaborateurs",views:{"content@":{templateUrl:"scripts/app/entities/encadrant/listcollaborateurs.html",controller:"EncadrantCollaborateursController"}}})}),app.controller("ManagerBipController",function(a,b,c,d,e,f,g,h){a.user=e.get("connectedUser"),a.user?"M"!=a.user.utilisateur.type?f.go("login"):a.id=a.user.utilisateur.id:f.go("login"),a.modif=[],a.modif2=[],a.modif3=[],a.Actions=[],a.objectifsFormation={},a.objectifsFormation.objectifs=[],a.objectifsFormation.autoformation=!1,a.Formations=[],a.newobjectifnewobjectifFormation={},d.get({id:b.id},function(b){a.collaborateur=b,g.ficheEnCours({id:a.collaborateur.id},function(b){a.ficheCourant=b,console.log(a.ficheCourant)})}),a.addObjectif=function(){a.ficheCourant.objectifs.push(a.newobjectif),a.newobjectif={}},a.addObjectifFormation=function(){a.newobjectifnewobjectifFormation.avancementObjectif=0,a.objectifsFormation.objectifs.push(a.newobjectifnewobjectifFormation),console.log(a.objectifsFormation),a.newobjectifnewobjectifFormation={}},a.addAction=function(){a.Actions.push(a.newaction),a.newaction={}},a.supprimerAction=function(b){a.Actions.splice(b,1)},a.supprimerObjectif=function(b){a.ficheCourant.objectifs.splice(b,1)},a.supprimerObjectifFormation=function(b){a.objectifsFormation.splice(b,1)},a.initModif=function(b){a.modif[b]=!0},a.Modif=function(b){a.modif[b]=!1},a.initModif2=function(b){a.modif2[b]=!0},a.Modif2=function(b){a.modif2[b]=!1},a.initModif3=function(b){a.modif3[b]=!0},a.Modif3=function(b){a.modif3[b]=!1},a.initFormation=function(){$("#FormationModal").modal("show")},a.initAction=function(){$("#ActionModal").modal("show")},a.MAJFormation=function(){a.Formations.push(a.objectifsFormation),a.objectifsFormation={},a.objectifsFormation.objectifs=[],a.objectifsFormation.autoformation=!1,$("#FormationModal").modal("hide")},a.MAJAction=function(){$("#ActionModal").modal("hide")},a.saveBip=function(){var b={};b.ficheObjectifsTraites=a.ficheCourant,b.collaborateur=a.collaborateur,b.actions=a.Actions,b.formations=a.Formations,b.dateBilan=new Date,console.log(b),h.save(b)}}),app.controller("demandeBipsController",function(a,b,c,d,e,f,g){a.user=e.get("connectedUser"),a.user?"M"!=a.user.utilisateur.type?f.go("login"):a.id=a.user.utilisateur.id:f.go("login"),d.get({id:a.id},function(b){a.collaborateurs=b.collaborateurs}),g.collaborateur({id:a.id},function(b){a.demandes=b,console.log(b)})}),app.controller("ManagerController",function(a,b,c,d,e,f,g,h){a.user=e.get("connectedUser"),a.user?"M"!=a.user.utilisateur.type?f.go("login"):a.id=a.user.utilisateur.id:f.go("login"),d.get({id:a.id},function(b){a.manager=b,a.collaborateurs=a.manager.collaborateurs}),a["class"]=function(a){return"EN_COURS"==a.statut?"info":"EN_ATTENTE"==a.statut?"warning":"VALIDE"==a.statut?"primary":"REJETE"==a.statut?"danger":void 0}}),app.config(function(a){a.state("manager",{url:"/managers",views:{"content@":{templateUrl:"scripts/app/entities/manager/listcollaborateurs.html",controller:"ManagerCollaborateursController"},"navbar@":{templateUrl:"scripts/app/partials/navbar-m.partial.html"}}}).state("manager.fiches",{url:"/fiches/:id",views:{"content@":{templateUrl:"scripts/app/entities/manager/fiches.html",controller:"ManagerArchiveController"}}}).state("manager.demandesbip",{url:"/demandesbip",views:{"content@":{templateUrl:"scripts/app/entities/manager/demandes.html",controller:"demandeBipsController"}}}).state("manager.collaborateur",{url:"/collaborateur/:id",views:{"content@":{templateUrl:"scripts/app/entities/manager/detailcollaborateur.html",controller:"ManagerCollaborateurController"}}}).state("manager.bip",{url:"/bip/:id",views:{"content@":{templateUrl:"scripts/app/entities/manager/bipcollaborateur.html",controller:"ManagerBipController"}}}).state("manager.collaborateurs",{url:"/collaborateurs",views:{"content@":{templateUrl:"scripts/app/entities/manager/listcollaborateurs.html",controller:"ManagerCollaborateursController"}}})}),app.controller("ManagerArchiveController",function(a,b,c,d,e,f){a.user=d.get("connectedUser"),a.user?"M"!=a.user.utilisateur.type?e.go("login"):a.id=a.user.utilisateur.id:e.go("login"),f.get({id:b.id},function(b){a.collaborateur=b,console.log(b),a.collaborateur.fichesobjectifs.forEach(function(a){a.dateFicheObjectifs=c("date")(a.dateFicheObjectifs,"yyyy-MM-dd")}),a.collaborateur.fichesevaluations.forEach(function(a){a.dateEvaluation=c("date")(a.dateEvaluation,"yyyy-MM-dd")})}),a.showObjectifs=function(b){a.hideobjectifs=!1;var c=a.collaborateur.fichesobjectifs.filter(function(a){return a.id==b});a.fichesobjectif=c[0],0==a.fichesobjectif.objectifs.length&&(a.hideobjectifs=!0),$("#objectifsModal").modal("show")},a.showEvaluations=function(b){a.hideevaluations=!1;var c=a.collaborateur.fichesevaluations.filter(function(a){return a.id==b});a.fichesevaluation=c[0],0==a.fichesevaluation.evaluations.length&&(a.hideevaluations=!0),$("#evaluationModal").modal("show")}}),app.controller("ManagerCollaborateurController",function(a,b,c,d,e,f,g,h,i,j){a.user=h.get("connectedUser"),a.user?"M"!=a.user.utilisateur.type?i.go("login"):a.id=a.user.utilisateur.id:i.go("login"),a.modif=[],d.bapCourant({id:b.id},function(b){a.bap=b,console.log(b)}),a.initModif=function(b){a.modif[b]=!0},a.Modif=function(b){a.modif[b]=!1},a.initValiderBap=function(b){a.bapToValidate=b,a.totalaValider=0,a.bapToValidate.ficheEvaluations.evaluations.forEach(function(b){""!=b.poids&&(a.totalaValider+=parseInt(b.poids))}),a.bapToValidate.feedbacks.forEach(function(a){var b=g.qualificationglobale({id:a.id});a.qualificationglobal=b}),a.current=1,$("#step1_1").show(),$("#step1_2").hide(),$("#step1_3").hide(),$("#step1_4").hide(),$("#step1_5").hide(),$("#BapModal").modal("show")},a.valider=function(b,c){a.bapToValidate.ficheObjectifsRediges.objectifs.splice(c,1),a.bapToValidate.ficheObjectifsTraites.objectifs.push(b),$("#objectif"+b.id).html("objectif Validé")},a.reporter=function(a){$("#objectif"+a.id).html("objectif Reporté")},a.nextStep=function(){2==a.current&&(a.ValiderBap(),console.log(a.bapToValidate)),3==a.current&&console.log(a.bapToValidate),$("#step1_"+a.current).hide(),a.current++,$("#step1_"+a.current).show()},a.addObjectif=function(){a.bapToValidate.ficheObjectifsRediges.objectifs.push(a.newobjectif),a.newobjectif={}},a.supprimerObjectif=function(b){a.bapToValidate.ficheObjectifsRediges.objectifs.splice(b,1)},a.ValiderBap=function(){a.totalaValider=0,a.bapToValidate.ficheEvaluations.evaluations.forEach(function(b){a.totalaValider+=parseInt(b.poids)}),100!=a.totalaValider?a.error2=!0:d.valider(a.bapToValidate,function(b){console.log(b),a.bapToValidate=b})},a.initPreparerBap=function(b){a.bapToPrepare=b,a.current=1,$("#step2_2").hide(),$("#step2_3").hide(),$("#step2_1").show(),$("#BapModal2").modal("show"),a.total=0,a.bapToPrepare.ficheEvaluations.evaluations.forEach(function(b){a.total+=parseInt(b.poids)})},a.majPoid=function(){a.total=0,a.bapToPrepare.ficheEvaluations.evaluations.forEach(function(b){""!=b.poids&&(a.total+=parseInt(b.poids))})},a.majPoidaValider=function(){a.totalaValider=0,a.bapToValidate.ficheEvaluations.evaluations.forEach(function(b){""!=b.poids&&(a.totalaValider+=parseInt(b.poids))})},a.MAJBap=function(){a.total=0,a.bapToPrepare.ficheEvaluations.evaluations.forEach(function(b){a.total+=parseInt(b.poids)}),100!=a.total?a.error=!0:(d.update({id:a.bapToPrepare},a.bapToPrepare),$("#BapModal2").modal("hide"))},a.SaveBap=function(){console.log(a.bapToValidate),d.save(a.bapToValidate,function(b){a.newBap=b,a.objectifsToLink=a.newBap.ficheObjectifsRediges.objectifs,a.encadrants=f.query()}),$("#step1_"+a.current).hide(),a.current++,$("#step1_"+a.current).show()},a.initLinkObject=function(b,c){b.encadrant=c,console.log(a.objectifsToLink)},a.LinkObjcetif=function(){a.objectifsToLink.forEach(function(a){console.log("linking objectif id "+a.id+" to encadrant id "+a.encadrant.id+"..."),e.linkToEncadrant({idObjectif:a.id,idencadrant:a.encadrant.id})})}}),app.controller("ManagerCollaborateursController",function(a,b,c,d,e,f){a.user=e.get("connectedUser"),a.user?"M"!=a.user.utilisateur.type?f.go("login"):a.id=a.user.utilisateur.id:f.go("login"),d.get({id:a.id},function(b){a.collaborateurs=b.collaborateurs})}),app.controller("UtilisateurController",function(a,b,c,d,e,f){a.user={},a.login=function(){c.auth({email:a.user.email,mdp:a.user.motDePasse},function(b){b.token?(e.put("connectedUser",b),e.put("logged",!0),a.user=e.get("connectedUser"),"A"==a.user.utilisateur.type&&f.go("administrateur"),"C"==a.user.utilisateur.type&&f.go("collaborateur"),"E"==a.user.utilisateur.type&&f.go("encadrant"),"M"==a.user.utilisateur.type&&f.go("manager")):e.put("logged",!1),a.$on("handleBroadcast",function(){a.message=sharedService.message})})}}),app.config(function(a){a.state("login",{url:"/login",views:{"login@":{templateUrl:"scripts/app/entities/utilisateur/utilisateur.html",controller:"UtilisateurController"}},data:{logged:!1}})}),app.directive("navbar",function(){return{restrict:"A",scope:{navbar:"="},templateUrl:function(a,b){return"scripts/app/partials/navbar-c.partial.html"}}}),app.factory("Action",function(a,b){return a("http://localhost:8080/HRPerformanceManagementSystem/resources/actions/:id",{},{query:{method:"GET",isArray:!0},get:{method:"GET",isArray:!1},collaborateur:{method:"GET",isArray:!0,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/actions/collaborateur/:id"},update:{method:"PUT"},save:{method:"POST"}})}),app.factory("Bap",function(a,b){return a("http://localhost:8080/HRPerformanceManagementSystem/resources/baps/:id",{},{query:{method:"GET",isArray:!0},get:{method:"GET",isArray:!1,transformResponse:function(a){return a=angular.fromJson(a),a.dateBilan=b("date")(a.dateBilan,"yyyy-MM-dd"),a}},collaborateur:{method:"GET",isArray:!0,transformResponse:function(a){return a=angular.fromJson(a),a.dateBilan=b("date")(a.dateBilan,"yyyy-MM-dd"),a},url:"http://localhost:8080/HRPerformanceManagementSystem/resources/baps/collaborateur/:id"},bapByStatut:{method:"GET",url:"http://localhost:8080/HRPerformanceManagementSystem/resources/baps/collaborateur/statut/:id/:statut"},bapCourant:{method:"GET",transformResponse:function(a){return a=angular.fromJson(a),a.dateBilan=b("date")(a.dateBilan,"yyyy-MM-dd"),a},url:"http://localhost:8080/HRPerformanceManagementSystem/resources/baps/collaborateur/statut/:id/EN_COURS"},valider:{method:"POST",isArray:!1,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/baps/valider"},rejeter:{method:"POST",isArray:!1,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/baps/rejeter"},update:{method:"PUT"},save:{method:"POST"}})}),app.factory("Bip",function(a,b){return a("http://localhost:8080/HRPerformanceManagementSystem/resources/bips/:id",{},{query:{method:"GET",isArray:!0},get:{method:"GET",isArray:!1,transformResponse:function(a){return a=angular.fromJson(a),a.dateBilan=b("date")(a.dateBilan,"yyyy-MM-dd"),a}},collaborateur:{method:"GET",isArray:!0,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/bips/collaborateur/:id"},update:{method:"PUT"},save:{method:"POST"}})}),app.factory("Collaborateur",function(a,b){return a("http://localhost:8080/HRPerformanceManagementSystem/resources/collaborateurs/:id",{},{query:{method:"GET",isArray:!0},get:{method:"GET",transformResponse:function(a){return a=angular.fromJson(a),a.fichesobjectifs.forEach(function(a){a.dateFicheObjectifs=b("date")(a.dateFicheObjectifs,"yyyy-MM-dd")}),a.fichesevaluations.forEach(function(a){a.dateEvaluation=b("date")(a.dateEvaluation,"yyyy-MM-dd")}),a}},encadrant:{method:"GET",isArray:!0,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/collaborateurs/encadrant/:id"},manager:{method:"GET",isArray:!0,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/collaborateurs/managerrh/:id"},"new":{method:"POST",url:"http://localhost:8080/HRPerformanceManagementSystem/resources/collaborateurs/:idmanager"},bap:{method:"GET",isArray:!0,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/collaborateurs/bapstatut/:idencadrant/:statut"},update:{method:"PUT"},save:{method:"POST"}})}),app.service("connect",function(){var a="none";return{getProperty:function(){return a},setProperty:function(b){a=b}}}),app.factory("DemandeBip",function(a,b){return a("http://localhost:8080/HRPerformanceManagementSystem/resources/demandebips/:id",{},{query:{method:"GET",isArray:!0},get:{method:"GET",isArray:!1},collaborateur:{method:"GET",isArray:!0,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/demandebips/collaborateur/:id"},manager:{method:"GET",isArray:!0,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/demandebips/manager/:id"},encadrant:{method:"GET",url:"http://localhost:8080/HRPerformanceManagementSystem/resources/demandebips/encadrant/:id"},update:{method:"PUT"},save:{method:"POST"}})}),app.factory("Encadrant",function(a,b){return a("http://localhost:8080/HRPerformanceManagementSystem/resources/encadrants/:id",{},{query:{method:"GET",isArray:!0},get:{method:"GET",isArray:!1},update:{method:"PUT"},save:{method:"POST"}})}),app.factory("Entete",function(a,b){return a("http://localhost:8080/HRPerformanceManagementSystem/resources/entetes/:id",{},{query:{method:"GET",isArray:!0},get:{method:"GET",isArray:!1},feedback:{method:"GET",url:"http://localhost:8080/HRPerformanceManagementSystem/resources/entetes/feedback/:id"},update:{method:"PUT"},save:{method:"POST"}})}),app.factory("Evaluation",function(a,b){return a("http://localhost:8080/HRPerformanceManagementSystem/resources/evaluations/:id",{},{query:{method:"GET",isArray:!0},get:{method:"GET",transformResponse:function(a){return a=angular.fromJson(a)}},ficheCouranteByCollaborateur:{method:"GET",isArray:!0,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/evaluations/ficheevaluationscourantes/collaborateur/:id"},collaborateur:{method:"GET",isArray:!0,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/evaluations/ficheevaluations/collaborateur/:id"},linkObjectifToProjet:{method:"GET",isArray:!0,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/evaluations/ficheevaluation/:idevaluation/:idficheevaluations"},addFiche:{method:"POST",isArray:!0,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/evaluations/ficheevaluations"},updateFiche:{method:"PUT",isArray:!0,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/evaluations/ficheevaluations/:id"},deleteFiche:{method:"DELETE",isArray:!0,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/evaluations/ficheevaluations/:id"},update:{method:"PUT"},save:{method:"POST"}})}),app.factory("Feedback",function(a,b){return a("http://localhost:8080/HRPerformanceManagementSystem/resources/feedbacks/:id",{},{query:{method:"GET",isArray:!0},get:{method:"GET",transformResponse:function(a){return a=angular.fromJson(a)}},encadrant:{method:"GET",isArray:!0,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/feedbacks/encadrant/:id"},collaborateur:{method:"GET",isArray:!0,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/feedbacks/collaborateur/:id"},qualificationglobale:{method:"GET",isArray:!1,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/feedbacks/qualificationglobale/:id"},bap:{method:"GET",isArray:!0,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/feedbacks/bap/:id"},update:{method:"PUT"},save:{method:"POST"}})}),app.factory("Formation",function(a,b){return a("http://localhost:8080/HRPerformanceManagementSystem/resources/formations/:id",{},{query:{method:"GET",isArray:!0},get:{method:"GET",isArray:!1},collaborateur:{method:"GET",isArray:!0,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/formations/collaborateur/:id"},update:{method:"PUT"},save:{method:"POST"}})}),app.factory("Manager",function(a,b){return a("http://localhost:8080/HRPerformanceManagementSystem/resources/managersrh/:id",{},{query:{method:"GET",isArray:!0},get:{method:"GET",isArray:!1},update:{method:"PUT"},save:{method:"POST"}})}),app.factory("Objectif",function(a,b){return a("http://localhost:8080/HRPerformanceManagementSystem/resources/objectifs/:id",{},{query:{method:"GET",isArray:!0},get:{method:"GET",transformResponse:function(a){return a=angular.fromJson(a)}},update:{
method:"PUT"},currentfiche:{method:"GET",isArray:!1,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/objectifs/ficheobjectifscourants/collaborateur/:id"},ficheEnCours:{method:"GET",isArray:!1,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/objectifs/ficheobjectifs/encours/:id"},collaborateur:{method:"GET",isArray:!1,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/objectifs/ficheobjectifs/collaborateur/:id"},linkToFiche:{method:"GET",isArray:!1,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/objectifs/link/ficheobjectifs/:idobjectif/:idficheobjectif"},linkToFormation:{method:"GET",isArray:!1,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/objectifs/link/formation/:idobjectif/:idformation"},linkToEncadrant:{method:"GET",isArray:!1,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/objectifs/link/encadrant/:idObjectif/:idencadrant"},linkToProject:{method:"GET",isArray:!1,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/objectifs/link/projet/:idobjectif/:idprojet"},addFiche:{method:"POST",url:"http://localhost:8080/HRPerformanceManagementSystem/resources/objectifs/ficheobjectifs"},updateFiche:{method:"PUT",url:"http://localhost:8080/HRPerformanceManagementSystem/resources/objectifs/ficheobjectifs/:id"},deleteFiche:{method:"DELETE",url:"http://localhost:8080/HRPerformanceManagementSystem/resources/objectifs/ficheobjectifs/:id"},save:{method:"POST"}})}),app.factory("Profil",function(a,b){return a("http://localhost:8080/HRPerformanceManagementSystem/resources/profils/:id",{},{query:{method:"GET",isArray:!0},get:{method:"GET",isArray:!1},code:{method:"GET",url:"http://localhost:8080/HRPerformanceManagementSystem/resources/profils/bycode/:code"},update:{method:"PUT"},save:{method:"POST"}})}),app.factory("Projet",function(a,b){return a("http://localhost:8080/HRPerformanceManagementSystem/resources/<projets></projets>/:id",{},{query:{method:"GET",isArray:!0},get:{method:"GET",isArray:!1},code:{method:"GET",url:"http://localhost:8080/HRPerformanceManagementSystem/resources/profils/bycode/:code"},update:{method:"PUT"},save:{method:"POST"}})}),app.factory("Utilisateur",function(a,b){return a("http://localhost:8080/HRPerformanceManagementSystem/resources/utilisateurs/:id",{},{query:{method:"GET",isArray:!0},get:{method:"GET",transformResponse:function(a){return a=angular.fromJson(a)}},auth:{method:"GET",isArray:!1,url:"http://localhost:8080/HRPerformanceManagementSystem/resources/utilisateurs/auth/:email/:mdp"},update:{method:"PUT"},save:{method:"POST"}})});